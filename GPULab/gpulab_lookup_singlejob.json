{
  "name": "lookup_table_generation_and_retrieval",
  "description": "Complete pipeline: Generate lookup tables for NME fiber simulation and output for local retrieval",
  "request": {
    "resources": {
      "cpus": 1,
      "gpus": 0,
      "cpuMemoryGb": 8,
      "clusterId": 6
    },
    "docker": {
      "image": "python:3.12-slim",
      "command": "bash -c 'apt-get update && apt-get install -y git python3-tk build-essential cmake && pip install neuron numpy scipy matplotlib tqdm colorlog lockfile pandas multiprocess boltons && mkdir -p /project_ghent/rsegawa && cd /project_ghent/rsegawa && echo \"Installing PySONIC...\" && rm -rf PySONIC && git clone https://github.com/tjjlemaire/PySONIC.git && cd PySONIC && pip install -e . && cd .. && echo \"Installing MorphoSONIC...\" && rm -rf MorphoSONIC && git clone https://github.com/tjjlemaire/MorphoSONIC.git && cd MorphoSONIC && pip install -e . && echo \"Compiling NEURON mechanisms...\" && cd MorphoSONIC/nmodl && nrnivmodl && cd ../.. && echo \"MorphoSONIC installation completed.\" && cd .. && echo \"Preparing main repository directory...\" && rm -rf URENIMOD-lookups && git clone https://github.com/whizzkid-ox/URENIMOD-lookups.git && cd URENIMOD-lookups && echo \"Repository cloned successfully. Starting lookup generation...\" && python run_lookups.py -fiber_length 1e-3 -fiber_diameter 1e-6 -membrane_thickness 1.4e-9 -freq 1e6 -amp 1e6 -charge -65.0 && echo \"Lookup generation completed successfully!\" && echo \"\" && echo \"=== PREPARING FILE FOR RETRIEVAL ===\" && LOOKUP_DIR=$(find /project_ghent/rsegawa/URENIMOD-lookups -name \"*unmyelinated_fiber_*\" -type d | head -1) && cd \"$LOOKUP_DIR\" && LOOKUP_FILE=$(ls *.pkl | head -1) && echo \"Found lookup file: $LOOKUP_FILE\" && echo \"File details:\" && ls -la \"$LOOKUP_FILE\" && echo \"File size: $(wc -c < \"$LOOKUP_FILE\") bytes\" && echo \"\" && echo \"=== LOOKUP TABLE BASE64 START ===\" && base64 -w 0 \"$LOOKUP_FILE\" && echo \"\" && echo \"=== LOOKUP TABLE BASE64 END ===\" && echo \"\" && echo \"=== FILE RETRIEVAL INFORMATION ===\" && echo \"File name: $LOOKUP_FILE\" && echo \"File path: $LOOKUP_DIR/$LOOKUP_FILE\" && echo \"Use the base64 content above to recreate the file locally\" && echo \"Pipeline completed successfully!\" && sleep 300'",      "storage": [
        {
          "containerPath": "/project_ghent"
        }
      ],"environment": {
        "PYTHONPATH": "/project_ghent/rsegawa/URENIMOD-lookups",
        "GITHUB_REPO": "https://github.com/whizzkid-ox/URENIMOD-lookups.git"
      }
    },    "scheduling": {
      "interactive": false
    }
  }
}